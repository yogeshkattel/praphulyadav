{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
      integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/"
      crossorigin="anonymous"
    />

    <!-- Medium Editor -->
    <style>
      @media (max-width: 768px) {
    .carousel-inner .carousel-item > div {
        display: none;
    }
    .carousel-inner .carousel-item > div:first-child {
        display: block;
    }
}

.carousel-inner .carousel-item.active,
.carousel-inner .carousel-item-next,
.carousel-inner .carousel-item-prev {
    display: flex;
}

/* display 3 */
@media (min-width: 768px) {
    
    .carousel-inner .carousel-item-right.active,
    .carousel-inner .carousel-item-next {
      transform: translateX(33.333%);
    }
    
    .carousel-inner .carousel-item-left.active, 
    .carousel-inner .carousel-item-prev {
      transform: translateX(-33.333%);
    }
}

.carousel-inner .carousel-item-right,
.carousel-inner .carousel-item-left{ 
  transform: translateX(0);
}


    </style>
    <script src="//cdn.jsdelivr.net/npm/medium-editor@latest/dist/js/medium-editor.min.js"></script>
    <link
      rel="stylesheet"
      href="//cdn.jsdelivr.net/npm/medium-editor@latest/dist/css/medium-editor.min.css"
      type="text/css"
      media="screen"
      charset="utf-8"
    />

    <!-- Custom Style -->
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}" />

    {% if title %}
    <title>Fun Olympics - {{ title }}</title>
    {% else %}
    <title>Fun Olympics</title>
    {% endif %}
  </head>
  
  <body  style=" min-height: 100vh; position: relative; margin: 0; padding-bottom: 100px; box-sizing: border-box; " class="">
    <header class="site-header">
      <nav class="navbar navbar-expand-md navbar-dark bg-steel fixed-top" style="background-color: #003594; padding: 20px;">
        <div class="container">
          
          <!-- logo Text -->
          
          <a class="navbar-brand mr-4" href="{% url 'index' %}"
            ><img src="https://olympics.com/images/static/b2p-images/logo_color.svg" alt="logo" style="height: 30%;"></a>
            <a class="navbar-brand " style="font-style: italic; font-weight: bolder;" href="{% url 'index' %}">Fun Olympics</a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarToggle"
            aria-controls="navbarToggle"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarToggle">
       
            <!-- Navbar Right Side -->
            <div class="navbar-nav ml-auto " style=" display: flex;
            column-gap: 20px;
            justify-content: space-between;
            font-weight: bolder;
            ">
              <a class="nav-item nav-link" href="{% url 'index' %}">Home</a>
              <div class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Catagories
                </button>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <ul class="list-group">
                    <li class="list-group-item list-group-item-light" >Football</li>
                    <li class="list-group-item list-group-item-light">Badminton</li>
                    <li class="list-group-item list-group-item-light">Swimming</li>
                    <li class="list-group-item list-group-item-light">Basketball</li>
                    <li class="list-group-item list-group-item-light">Volleyball</li>
                    <li class="list-group-item list-group-item-light">Table-Tennis</li>
                    <li class="list-group-item list-group-item-light">Etc</li>
                  </ul>
                </div>
                
            </div>
              {% if user.is_authenticated %}
              <div class="ins" style="display: flex;" >

              </div>
 
       
           
              

              <div class="dropdown " style="display: flex;">
               
                <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <img src="https://www.w3schools.com/howto/img_avatar.png" alt="Avatar" id="profile_pic" class="avatar " style="width: 30px; height: 30px; border-radius: 50%;">
                  </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" href="{% url 'profile' %}">Profile</a>
                  <a class="dropdown-item" href="{% url 'logout' %}">Logout</a>
                </div>
              
                <!-- Notifications section on navbar -->
                <div class="dropdown " style="display: flex; margin-left: 7%;">
                  <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fa fa-bell" style="font-size: 20px;"></i>
                  </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" id="notification_menu">
            
                  </div>
                
              
              {% else %}
              <a class="nav-item nav-link" href="{% url 'login' %}">Login</a>
              <a class="nav-item nav-link" href="{% url 'register' %}"
                >Register</a
              >
              {% endif %}
              
   
          </div>
        </div>
      </nav>
      <br>
      <br>
      <br>
   
    </header>

    <br>
    <br>
    <br>
    
    
    {% if request.path == '/' %}
    <div class="container text-center my-3">
      <div class="row mx-auto my-auto">
        
          <div id="recipeCarousel" class="carousel slide w-100" data-ride="carousel">
              <div class="carousel-inner w-100" role="listbox">

                  <div class="carousel-item active" >
                      <div class="col-md-4" hidden>
                          <div class="card card-body">
                              dude
                          </div>
                      </div>
                  </div>
                  {% for notice in notice%}
                  <div class="carousel-item" >
                      <div class="col-md-4" >
                          <div class="card card-body" style="background-color:#0069D9 ; color: white;">
                              <h7 style="font-weight: bolder;">{{notice}}</h7>
                          </div>
                      </div>
                  </div>
                  {% endfor %}
              </div>
              <a class="carousel-control-prev w-auto" href="#recipeCarousel" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon bg-dark border border-dark rounded-circle" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next w-auto" href="#recipeCarousel" role="button" data-slide="next">
                  <span class="carousel-control-next-icon bg-dark border border-dark rounded-circle" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
              </a>
          </div>
       

      </div>

  </div>
  {% endif %}




</div>
    <main role="main" class="container"  style="">

      <div class="row" >
        <div class="col-md-9 ttt" >
          <div >
            
          </div>
          {% if messages %}
          {% for message in messages %}
          {% if message.tags == 'error' %}
          <div class="alert alert-danger" role="alert">
            {{ message }}
          </div>
          {% else %}

          <div class="alert alert-{{ message.tags }} ">
            {{ message }}
          </div>
          {% endif %}
          {% endfor %}
          {% endif %}
          {% block content %}
          {% endblock %}
        </div>
        
    
      </div>
    </main>
    

      <br>
      <br>
      <br>
      <br>
      <br>
    <footer style="background-color: #003594;  position: absolute; bottom: 0; width: 100%; " class="text-center text-white footer  mt-auto" >
      <!-- Grid container -->
      <div class="container pt-4">
        <!-- Section: Social media -->
        <section class="mb-4" >
          <!-- Facebook -->
          <a
            class="btn btn-link btn-floating btn-lg text-light m-1"
            href="https://www.facebook.com/praphul.yadav.96"
            role="button"
            data-mdb-ripple-color="dark"
            ><i class="fab fa-facebook-f"></i
          ></a>
    
          <!-- Twitter -->
          <a
            class="btn btn-link btn-floating btn-lg text-light m-1"
            href="https://twitter.com/PraphulYadav131"
            role="button"
            data-mdb-ripple-color="dark"
            ><i class="fab fa-twitter"></i
          ></a>
    
         

    
          <!-- Instagram -->
          <a
            class="btn btn-link btn-floating btn-lg text-light m-1"
            href="https://www.instagram.com/praphul_yadav_/"
            role="button"
            data-mdb-ripple-color="dark"
            ><i class="fab fa-instagram"></i
          ></a>
    
          <!-- Linkedin -->
          <a
            class="btn btn-link btn-floating btn-lg text-light m-1"
            href="https://www.linkedin.com/in/praphul-ghotiya-b71504242/"
            role="button"
            data-mdb-ripple-color="dark"
            ><i class="fab fa-linkedin"></i
          ></a>
          <!-- Github -->
          <a
            class="btn btn-link btn-floating btn-lg text-light m-1"
            href="https://github.com/yadavpraphul"
            role="button"
            data-mdb-ripple-color="dark"
            ><i class="fab fa-github"></i
          ></a>
        </section>
        <!-- Section: Social media -->
      </div>

      <!-- email id section footer-->
      <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
        <a class="text-white" href="mailto:[praphul@ismt.edu.np]
">Email: praphul@ismt.edu.np</a>
<br>
<a class="text-white">Phone: 9817354475</a>

      </div>
      <!-- phone number section footer -->

      <!-- Grid container -->
    <br>
      <!-- Copyright -->
      <div class="text-center text-light  " style="background-color: #003594; ">
        Â© 2022 Copyright: praphul

        

      </div>
      

      
      

      <!-- Copyright -->
    </footer>
    
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.4.1.js"
      integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>

    <script>
      
      const lis  = document.getElementsByTagName('li');
      // console.log(lis);
      // redirect to another page with innerHTML
      for(let i = 0; i < lis.length; i++){
        lis[i].addEventListener('click', function(){
        
          // redirect to another page with innerHTML
          window.location.href = `${window.location.origin}/filter/${this.innerHTML.toLocaleLowerCase()}`;

        });
        // change color of li when hover change cursor to pointer
        lis[i].addEventListener('mouseover', function(){
          // this.style.color = '#fff';
          this.style.cursor = 'pointer';
        });
   
  
      }

      fetch(window.location.origin + '/api-blog/profile_pic', {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
          'X-CSRFToken': '{{ csrf_token }}',
          'Authorization': 'Token '+ localStorage.getItem('token')
        }
      }).then(res => res.json()).then(data => {
        console.log(data);
        if(data.profile_pic){
          document.getElementById('profile_pic').src = data.profile_pic;
        }
      })
      // fetch data from server and store in local storage
      fetch(window.location.origin + '/api-blog/contributer/', {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': 'Token ' + localStorage.getItem('token')
        }
      })
        .then(res => res.json())
        .then(data => {
          // check if the is_contributer is true
          // console.log(data.is_contributor)
          if (data.is_contributor) {
            // if true then show the navbar
            // insert the items in the navbar
            const navbar = document.getElementsByClassName('ins');
            console.log(navbar);
            // Insert premade  html in the navbar
            navbar[0].innerHTML += `
            <a class="nav-item nav-link" href="{% url 'post_create' %}">Upload Videos</a>
            `
            navbar[0].innerHTML += `
            <a class="nav-item nav-link" href="{% url 'news_create' %}">Create News</a>`
          }

        }).catch(err => {
          console.log(err);
        }
        );
      
      
    </script>

{% if request.path == '/' %}
    <script>
      const url = window.location.origin +'/api-blog/notifications'

      


      setInterval(() => {
        fetch(url).then(data => data.json()).then(data => {
          // loop through the data and display the notification
          console.log(data)
          const notif = document.getElementById('notification_menu');
          notif.innerHTML = '';
          data.forEach(element => {
            notif.innerHTML += `

            
            <a href="${window.location.origin}/post/${element.post}" class="alert-link dropdown-item" ><p class="mb-0">${element.message}</p></a>
 `
          });
      })
      }, 1000)
    </script>
    {% endif %}
    <script>
      $('#recipeCarousel').carousel({
  interval: 10000
})

$('.carousel .carousel-item').each(function(){
    var minPerSlide = 3;
    var next = $(this).next();
    if (!next.length) {
    next = $(this).siblings(':first');
    }
    next.children(':first-child').clone().appendTo($(this));
    
    for (var i=0;i<minPerSlide;i++) {
        next=next.next();
        if (!next.length) {
        	next = $(this).siblings(':first');
      	}
        
        next.children(':first-child').clone().appendTo($(this));
      }
});

    


    </script>
    <!-- Optional JavaScript -->
    <script src="{% static 'js/main.js' %}"></script>
  </body>
</html>
